Pseudocode for monitors with semaphores.
Lab 4 CMPT 332 
Fall 2022

Global data:
semaphores for enterQ, urgentQ, and mutex.
semaphores for each condition variable. Have at least 4 CVs.
global variable to indicate if monitor occupied.

Lists for each CV and an enterq and an urgentq
Lists make it easy to debug what is going on and give you practice
with list operations.

MonEnter()
  send message to server

MonLeave()
  send message to server
  


MonServer()

forever

  receive message

  case messagetype

  ENTER:


if urgentq not empty, take item off urgentq, V the urgentQ semaphore
	 and release the mutex
  else if enterq not empty, take item off enterq, V the enterQ semaphore
	and release the mutex
  else monBusy to false and  release mutex

MonWait (int cv)
  acquire mutex
  add to cv_waitinglist
  if urgentq not empty, take item off urgentq, V the urgentQ semaphore
  else if enterq not empty, take item off enterq, V the enterQ semaphore
  else set monBusy to false

  release the mutex
  P the cv_semaphore

MonSignal(int cv)
  acquire mutex
  if there is non-empty cvlist,  take first item off the CV_waitinglist, add
     current thread to the urgentq, release mutex, V  the
     cv_semaphore, block on the urgentQ semaphore
  else
     release mutex

MonInit

  create semaphores and lists;

  


  
